<div class="container">
    <h1 class="title">Lista de Encargados</h1>

    <!-- Mensaje de error -->
    <div *ngIf="errorMessage" class="error">
        {{ errorMessage }}
    </div>

    <!-- Tabla de encargados -->
    <table class="table" *ngIf="encargados.length > 0">
        <thead>
            <tr>
                <th>ID</th>
                <th>Nombre</th>
                <th>Apellido Paterno</th>
                <th>Apellido Materno</th>
                <th>Correo</th>
                <th>Acciones</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let encargado of encargados" (click)="showDetails(encargado)" class="hoverable">
                <td>{{ encargado.Id_encargado_pk }}</td>
                <td>{{ encargado.Nombre }}</td>
                <td>{{ encargado.Ap_paterno }}</td>
                <td>{{ encargado.Ap_materno }}</td>
                <td>{{ encargado.usuario?.Correo || 'Sin asignar' }}</td>
                <td>
                    <button class="btn btn-delete" (click)="deleteEncargado(encargado.Id_encargado_pk, $event)">Eliminar</button>
                </td>
            </tr>
        </tbody>
    </table>

    <!-- Mensaje cuando no hay encargados -->
    <div *ngIf="encargados.length === 0 && !errorMessage" class="no-data">No hay encargados disponibles.</div>

    <!-- Modal para detalles -->
    <div class="modal" *ngIf="selectedEncargado">
        <div class="modal-content">
            <!-- BotÃ³n de cerrar -->
            <button class="close-btn" (click)="closeDetails()">&times;</button>
            
            <h2>Detalles del Encargado</h2>
            <p><strong>ID:</strong> {{ selectedEncargado.Id_encargado_pk }}</p>
            <p><strong>Nombre:</strong> {{ selectedEncargado.Nombre }}</p>
            <p><strong>Apellido Paterno:</strong> {{ selectedEncargado.Ap_paterno }}</p>
            <p><strong>Apellido Materno:</strong> {{ selectedEncargado.Ap_materno }}</p>
            <p><strong>Correo:</strong> {{ selectedEncargado.usuario?.Correo || 'Sin asignar' }}</p>
    
            <h3>Horarios y Actividades</h3>
            <ul>
                <li *ngFor="let detalle of selectedEncargado.detalles">
                    <p><strong>Horario:</strong> {{  desformatearHorario(detalle.horario?.Dia) }} <br>
                        {{ detalle.horario?.Hora_inicio }} - {{ detalle.horario?.Hora_fin }}</p>
                    <p><strong>Actividad:</strong> {{ detalle.actividad?.Nombre }} ({{ detalle.actividad?.Tipo }})</p>
                </li>
            </ul>
        </div>
    </div>    
</div>
